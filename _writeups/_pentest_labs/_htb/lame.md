[**< back**](/README.md)

# HTB - Lame

**Machine**: Lame  
**Author**: Nika Kharebava

## Information Gathering
### NMap
:mag: Initial enumeration using Nmap  
![Initial Nmap](/_storage/_img/_pentest_labs/_htb/lame/nmap_initial.jpg)
:mag: Additional port scanning, discovering higher number ports.  
![Initial Nmap](/_storage/_img/_pentest_labs/_htb/lame/nmap_higher_ports_scan.jpg)


## Exploitation :microbe: 
### Exploiting via SMB
We can exploit the samba vulnerability via Metasploit and manually too. Let's do it with metasploit first.
![msf_samba_exploit](/_storage/_img/_pentest_labs/_htb/lame/msf_samba.jpg)
Which grants us with a reverse shell with root privileges.  
![msf_granted_shell](/_storage/_img/_pentest_labs/_htb/lame/msf_granted_shell.jpg)

Now let's do the same with a manual approach. :pick:

The exploit Metasploit is using is based on **"CVE-2007-2447"**, we can rewrite metasploit ruby exploit in python and generate a shellcode on our own using msfvenom.

First let's generate a reverse shell shellcode :syringe:	
![venom_generate_payload](/_storage/_img/_pentest_labs/_htb/lame/venom_generate_payload.jpg)
Thn we rewrite the exploit in python, launch a netcat listener and launch the script too.
![python_exploit](/_storage/_img/_pentest_labs/_htb/lame/python%20_exploit.jpg)
and we have successfully gained a netcat reverse shell with root privileges. :door:
![netcat_reverse_shell_root](/_storage/_img/_pentest_labs/_htb/lame/netcat_reverse_shell_root.jpg)
