[**< back**](/README.md)

# HTB - Remote
**Machine**: Remote
**Author**: Nika Kharebava  

## Information Gathering  
### Rustscan/Nmap  
Initial enumeration using rustscan :mag:  
`rustscan -a 10.129.122.160 --range 1-65000 --ulimit 5000`  

![initial_rustscan](/_storage/_img/_pentest_labs/_htb/remote/initial_rustscan.png)  

A bit more...  
`nmap -sV -sC -T5 -Pn 10.129.122.160 -p 21,80,111,139,135,445,2049,5985,49667,49665`  
![nmap_result](/_storage/_img/_pentest_labs/_htb/remote/nmap_result.png)  


Navigating the port 80 leads us to some website `ACME Widgets` (will take a deeper look)  
![navigating_web](/_storage/_img/_pentest_labs/_htb/remote/navigating_web.png)  

Ftp allowes anonymous user logins, might also help...  
![anonymous_ftp_allowed](/_storage/_img/_pentest_labs/_htb/remote/anonymous_ftp_allowed.png)

There's also a running service on port 5985, might be useful?! or not?!...  

Meanwhile lets run a small gobuster enumeration  
`gobuster dir -u http://10.129.122.160 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt`  
![gobuster](/_storage/_img/_pentest_labs/_htb/remote/gobuster.png)  

umbraco login, might be useful  
![umbraco_login](/_storage/_img/_pentest_labs/_htb/remote/umbraco_login.png)  

searchsploit suggests us that umbraco is vulnerable to authenticated rce  
![umbraco_searchsploit](/_storage/_img/_pentest_labs/_htb/remote/umbraco_searchsploit.png)  

Seems like we need to harverst some credentials first?! maybe?!..  

alr... lets try harversting any emails available on the web first  
`cewl -w res -g -e -o --email_file emails http://10.129.122.160/`  
no emails where harvested but the wordlist might be useful later... (we'll see)  

and one more interesting thing the nfs emself...  
![nfs_discovered](/_storage/_img/_pentest_labs/_htb/remote/backup_doscovered.png)  

now we have access to the backup and we can enumerate it...  
![backup_access](/_storage/_img/_pentest_labs/_htb/remote/backup_accessed.png)  

After some research I found out online that umbraco stores db related configuration in `/App_Data/umbraco.sdf` and we can obtain password hashes from there...  
![password_hashes_fetched](/_storage/_img/_pentest_labs/_htb/remote/password_hashes_found.png)  
Which we can crack...  
![password_hash_cracked](/_storage/_img/_pentest_labs/_htb/remote/hash_cracked.png)  

so the credentials are `admin@htb.local:baconandcheese` 

## Exploitation

Time to exploit authenticated RCE

We can ensure the version  
![umbraco_version](/_storage/_img/_pentest_labs/_htb/remote/umbraco_version.png)  

We can use any version of exploits here   
![searchsploit_ensured](/_storage/_img/_pentest_labs/_htb/remote/searchsploit_ensured.png)  

